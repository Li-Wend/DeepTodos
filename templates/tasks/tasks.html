<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DeepTodos - 智能任务管理</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/font-awesome/fontawesome-free-6.4.0-web/css/all.min.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tasks/tasks.css') }}" />
  </head>

  <body onload="bodyOnload()">
    <!-- 动画背景 -->
    <div class="animated-bg">
      <ul class="bg-bubbles">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
      </ul>
    </div>

    <!-- 主容器 -->
    <div class="container">
      <div class="header-container">
        <h1 class="page-title">
          <i class="fas fa-tasks"></i>
          <span id="displayDayofWeek"></span>
        </h1>

        <div class="dropdown">
          <button class="dropbtn">
            <i class="fas fa-user-circle"></i>
            <span id="mobile_number">DeepTodos 用户</span>
          </button>
          <div class="dropdown-content">
            <a onclick="switchLanguage('zh')"><i class="fas fa-language"></i> 中文</a>
            <a onclick="switchLanguage('en')"><i class="fas fa-globe"></i> English</a>
            <a onclick="changePassword()"><i class="fas fa-key"></i> 修改密码</a>
            <a onclick="logout()"><i class="fas fa-sign-out-alt"></i> 退出登录</a>
            <a onclick="removeAccount()"><i class="fas fa-trash-alt"></i> 删除账号</a>
          </div>
        </div>
      </div>

      <!-- 视图切换 -->
      <div class="view-switch">
        <button onclick="switchView('day')" class="btn btn-primary active"><i class="fas fa-calendar-day"></i> 日视图</button>
        <button onclick="switchView('myTasks')" class="btn btn-secondary"><i class="fas fa-list-check"></i> 我的任务</button>
      </div>

      <!-- 日视图 -->
      <div id="dayView" class="view-container active">
        <div class="date-nav">
          <button onclick="changeDate(-1)" class="btn btn-dark"><i class="fas fa-arrow-left"></i> 前一天</button>
          <input type="date" id="datePicker" onchange="loadCurrentDayTasks()" />
          <button onclick="changeDate(1)" class="btn btn-dark">后一天 <i class="fas fa-arrow-right"></i></button>
          <button onclick="returnCurrentDateTasks()" class="btn btn-info"><i class="fas fa-calendar-check"></i> 返回当天</button>
        </div>

        <div class="input-group">
          <label for="taskCategory">任务类别</label>
          <select id="taskCategory">
            <option value="work">工作</option>
            <option value="deepverve">DeepVerve</option>
            <option value="deeptodos">DeepTodos</option>
            <option value="personal">个人</option>
            <option value="shopping">购物</option>
            <option value="health">健康</option>
            <option value="education">学习</option>
          </select>

          <label for="taskPriority">优先级</label>
          <select id="taskPriority">
            <option value="low">低</option>
            <option value="medium" selected>中</option>
            <option value="high">高</option>
          </select>
        </div>

        <div class="input-group">
          <input type="text" id="taskInput" placeholder="输入新任务..." />
          <button onclick="addTask()" class="btn btn-primary"><i class="fas fa-plus"></i> 添加任务</button>
        </div>

        <ul id="currentDayTaskList"></ul>
      </div>

      <!-- 我的任务视图 -->
      <div id="myTasksView" class="view-container">
        <div class="input-group">
          <label for="taskCategory">任务类别</label>
          <select id="taskCategory">
            <option value="work">工作</option>
            <option value="deepverve">DeepVerve</option>
            <option value="deeptodos">DeepTodos</option>
            <option value="personal">个人</option>
            <option value="shopping">购物</option>
            <option value="health">健康</option>
            <option value="education">学习</option>
          </select>

          <label for="taskPriority">优先级</label>
          <select id="taskPriority">
            <option value="low">低</option>
            <option value="medium" selected>中</option>
            <option value="high">高</option>
          </select>
        </div>

        <div class="input-group">
          <input type="text" id="globalTaskInput" placeholder="输入新任务..." />
          <button onclick="addGlobalTask()" class="btn btn-primary"><i class="fas fa-plus"></i> 添加任务</button>
        </div>

        <div id="allUnfinishedTasks">
          <div class="section-title">
            <i class="fas fa-list"></i> 未完成任务
          </div>
          <ul id="allUnfinishedTasksList"></ul>
        </div>

        <div id="allFinishedTasks">
          <div class="section-title">
            <i class="fas fa-check-circle"></i> 已完成任务
          </div>
          <ul id="allFinishedTasksList"></ul>
        </div>
      </div>

      <div class="footer">
        <div class="icp-container">
          <a href="http://beian.miit.gov.cn/" target="_blank" class="icp-link">
            <i class="fas fa-shield-alt"></i>
            <span>黑ICP备2025041634号</span>
          </a>
          <div class="copyright">© 2025 deeptodos.com 版权所有</div>
        </div>

        <div class="security-badges">
          <div class="badge">
            <i class="fas fa-lock"></i>
            <span>安全加密</span>
          </div>
          <div class="badge">
            <i class="fas fa-user-shield"></i>
            <span>隐私保护</span>
          </div>
        </div>
      </div>
    </div>

    <script src="static/js/tasks/tasks.js"></script>
  </body>
</html>
